%%%%% Technical Details %%%%%

\chapter{Installing and Using ``Processing Abstractions''} \label{app_setup}

In order to set up ``Processing Abstractions'', first download \ac{GT} from \url{https://gtoolkit.com/download/} for your platform and extract the archive's entire content.

Before running it, create a new text file called \ct{startup.st} in \ac{GT}'s top-level folder besides \ct{GlamorousToolkit.image} with the following content (access it through figure \ref{fig_startup_st_qr}):

\begin{code}
Metacello new
	repository: 'github://zeniko/\ac{GT}-exploration:thesis/src';
	baseline: 'GtExploration';
	load.

Metacello new
	repository: 'github://zeniko/processing-abstractions:thesis/src';
	baseline: 'ProcessingAbstractions';
	load.

"Hide the 'Implementation and Tests' section."
GtExplorationHomeSection studentMode: true.

"Make indenting keyboard shortcuts available to non-US-English keyboard layouts
(cf. https://github.com/feenkcom/gtoolkit/issues/3002)."
LeSnippetElement keyboardShortcuts
	at: #IndentSnippet
		put: BlKeyCombinationBuilder new alt shift arrowRight build;
	at: #UnindentSnippet
		put: BlKeyCombinationBuilder new alt shift arrowLeft build.

"Make the zoom in keyboard shortcut available to de-CH keyboard layouts
(cf. https://github.com/feenkcom/gtoolkit/issues/4624)."
TLeWithFontSize compile:
	((TLeWithFontSize methodNamed: #initializeFontSizeShortcuts) sourceCode
		copyReplaceAll: 'equal' with: 'shift minus').

"Patch unneeded addressbar out of YouTube snippet
(cf. https://github.com/feenkcom/gtoolkit/issues/4560)."
LeYoutubeReferenceElement compile:
	((LeYoutubeReferenceElement methodNamed: #updatePicture) sourceCode
		copyReplaceAll: '</iframe>'' ' with: '</iframe>''; removeChildAt: 1 ').
\end{code}

Finally run the \ct{GlamorousToolkit} executable (under Windows and Linux it's located in the \ct{bin} subfolder). The teaching materials of ``Processing Abstractions'' are now available behind the ``Unterrichtseinheiten'' home tile.

Verify that everything works as desired and then close and save the changes to the image. Now, the above \ct{startup.st} can be removed, since all its changes have been persisted in \ac{GT}'s \ct{.image} file.

\emph{Warning:} If you've already used \ac{GT} before, the contents of your local knowledge database will also be included in \ac{GT}'s image. Therefore rename that folder (usually \ct{lepiter/default} in your documents folder) before starting the \ac{GT} meant for distribution.

Also, since the executable \ct{GlamorousToolkit.exe} is located in a subdirectory under Windows and Linux, adding a top-level link can help students. See \url{https://github.com/zeniko/gtRunner} for a ready-to-use drop-in.

\begin{cfigure}[fig_startup_st_qr]{QR-link to the code for \ct{startup.st} for convenience}
\href{https://github.com/zeniko/gyminf-thesis/blob/main/appendix.tex}{\includegraphics[height=2.5cm]{startup.st}}
\end{cfigure}



\chapter{GT Processing API} \label{app_api}

This appendix lists the available \ac{API} calls implemented in Processing Abstraction's Processing.\footnote{For comparison, the full \ac{API} or Processing's Python mode is available at \archivedurl{https://py.processing.org/reference/}.} This has been auto-generated from \ac{GT} page ``Processing API'':

\input{appendix-api}



\chapter{Technical Implementation of ``Processing Abstractions''} \label{app_implementation}


\section{Classes}

\begin{description}

\item[\texttt{BlContainerWithHeaderElement}] \hfill \\
	
\item[\texttt{BrTextEditorReadonlyWithNavigationMode}] \hfill \\
	
\item[\texttt{GtExplorationHomeSection}] \hfill \\
	
\item[\texttt{GtProcessingCoderDebugShortcut}] \hfill \\
	
\item[\texttt{GtProcessingCoderModel}] \hfill \\
	
\item[\texttt{GtProcessingCoderRunDetailsShortcut}] \hfill \\
	
\item[\texttt{GtProcessingCoderRunShortcut}] \hfill \\
	
\item[\texttt{GtProcessingCoderRunStepsShortcut}] \hfill \\
	
\item[\texttt{GtProcessingCoderViewModel}] \hfill \\
	
\item[\texttt{LeProcessingSnippet}] \hfill \\
	
\item[\texttt{LeProcessingSnippetElement}] \hfill \\
	
\item[\texttt{LeProcessingSnippetViewModel}] \hfill \\
	
\item[\texttt{LiveViewWrapper}] \hfill \\
	
\item[\texttt{ProcessingASTChanged}] \hfill \\
	
\item[\texttt{ProcessingAstCleaner}] \hfill \\
	
\item[\texttt{ProcessingCanvas}] \hfill \\
	
\item[\texttt{ProcessingCanvasElement}] \hfill \\
	
\item[\texttt{ProcessingCanvasEllipse}] \hfill \\
	
\item[\texttt{ProcessingCanvasExamples}] \hfill \\
	
\item[\texttt{ProcessingCanvasImage}] \hfill \\
	
\item[\texttt{ProcessingCanvasLine}] \hfill \\
	
\item[\texttt{ProcessingCanvasPolygon}] \hfill \\
	
\item[\texttt{ProcessingCanvasPresenter}] \hfill \\
	
\item[\texttt{ProcessingCanvasRectangle}] \hfill \\
	
\item[\texttt{ProcessingCanvasRoundedRectangle}] \hfill \\
	
\item[\texttt{ProcessingCanvasShape}] \hfill \\
	
\item[\texttt{ProcessingCanvasText}] \hfill \\
	
\item[\texttt{ProcessingCodeBase}] \hfill \\
	
\item[\texttt{ProcessingCompiler}] \hfill \\
	
\item[\texttt{ProcessingEllipsis}] \hfill \\
	
\item[\texttt{ProcessingExecTest1}] \hfill \\
	
\item[\texttt{ProcessingExplainShape}] \hfill \\
	
\item[\texttt{ProcessingInterpreter}] \hfill \\
	
\item[\texttt{ProcessingList}] \hfill \\
	
\item[\texttt{ProcessingProgram}] \hfill \\
	
\item[\texttt{ProcessingProgramChanged}] \hfill \\
	
\item[\texttt{ProcessingProgramExamples}] \hfill \\
	
\item[\texttt{ProcessingRunner}] \hfill \\
	
\item[\texttt{ProcessingRunnerExamples}] \hfill \\
	
\item[\texttt{ProcessingRunStep}] \hfill \\
	
\item[\texttt{ProcessingSource}] \hfill \\
	
\item[\texttt{ProcessingSourceChanged}] \hfill \\
	
\item[\texttt{ProcessingSourceChangedError}] \hfill \\
	
\item[\texttt{ProcessingSourceExamples}] \hfill \\
	
\item[\texttt{ProcessingTokenExtractor}] \hfill \\
	
\item[\texttt{ProcessingTokenExtractorExamples}] \hfill \\
	
\item[\texttt{ProcessingTranspilationSlice}] \hfill \\
	
\item[\texttt{ProcessingTranspiler}] \hfill \\
	
\item[\texttt{ProcessingTranspilerExamples}] \hfill \\
	
\item[\texttt{ProcessingTranspilerVariant}] \hfill \\
	
\item[\texttt{ProcessingTranspilerVariantExamples}] \hfill \\
	
\item[\texttt{ProcessingTreeMondrianCreatorExamples}] \hfill \\
	
\item[\texttt{ProcessingViewSelectionChanged}] \hfill \\
	
\item[\texttt{Stepper}] \hfill \\
	
\item[\texttt{StepperExamples}] \hfill \\
	
\item[\texttt{ViewComparison}] \hfill \\
	
\item[\texttt{ViewComparisonExamples}] \hfill \\
	

\end{description}


\begin{cfigure}[fig_uml_snippet]{Diagram of classes involved in \ct{LeProcessingSnippet}}
\input{diagrams/uml-snippet}
\end{cfigure}


\section{Views}

The following views are available as arguments for \ct{ProcessingSource>>>renderLiveView:} (see figure \ref{fig_embedding_view} on page \pageref{fig_embedding_view}). See figure \ref{fig_uml_views} for an overview of all view implementors.

\begin{cfigure}[fig_uml_views]{Diagram of all views provided and their implementors (methods set in \textit{italics} are forwarded)}
\input{diagrams/uml-views}
\end{cfigure}

\begin{description}
\item[\texttt{gtAbstractionsFor:}] \hfill \\
	(implemented by \ct{ProcessingProgram}) combines \ct{gtSourceCodeFor:}, \ct{gtTreeFor:}, \ct{gtBytecodeFor:} and \ct{gtOutputFor:}, linking the source to the other three views through a common \ct{Announcer} reacting to selection changes (shown in figure \ref{fig_view_abstractions}).
\item[\texttt{gtBytecodeFor:}] \hfill \\
	uses the \ct{CompiledMethod} instances of each method in a compiled class' \ct{class methodDict} to access its \ct{symbolicBytecodes} and show the resulting \ct{SymbolicBytecode}s' bytes and mnemonic (shown on the right in figure \ref{fig_view_ir_bytecode}). \ct{gtBytecodePlusSourceFor:} combines this view with \ct{gtSourceCodeFor:}.
\item[\texttt{gtBytecodePlusIRFor:}] \hfill \\
	combines the \ct{gtBytecodeFor:} with \ct{gtIntermediaryRepresentationFor:} (shown in figure \ref{fig_view_ir_bytecode}).
\item[\texttt{gtHexDumpFor:}] \hfill \\
	shows type individual bytes for all compiled methods.
\item[\texttt{gtIntermediaryRepresentationFor:}] \hfill \\
	uses the \ct{OpalCompiler} for translating the transpiled Smalltalk code to \ct{IRInstruction}s (shown on the left in figure \ref{fig_view_ir_bytecode}). \ct{gtIntermediaryRepresentationPlusSourceFor:} combines this view with \ct{gtSourceCodeFor:}.
\item[\texttt{gtOutputFor:}] \hfill \\
	displays a newly created \ct{ProcessingCanvasElement} with attached event listeners for interactivity (shown on the bottom right in figure \ref{fig_view_abstractions}). \ct{gtOutputPlusSourceFor:} combines this view with \ct{gtSourceCodeFor:}.
\item[\texttt{gtOutputShapesFor:}] \hfill \\
	shows a list of all \ct{ProcessingCanvasShape}s in the order they were drawn (shown in figure \ref{fig_view_shapes}). Clearing the canvas with \ct{background(...)} also clears this list.
\item[\texttt{gtSlicesFor:}] \hfill \\
	shows a list of \ct{ProcessingTranspilationSlice}s with the corresponding expressions in Processing source code and Smalltalk transpilation highlighted (shown in figure \ref{fig_view_slices}).
\item[\texttt{gtSourceBytesFor:}] \hfill \\
	shows a list of \ct{SmallInteger}s corresponding to the bytes of the source code after UTF-8 encoding (shown on the right in figure \ref{fig_view_chars_bytes}) \ct{gtSourceBytesPlusSourceFor:} combines this view with \ct{gtSourceCodeFor:}.
\item[\texttt{gtSourceBytesPlusCharsFor:}] \hfill \\
	combines \ct{gtSourceCharsFor:} and \ct{gtSourceBytesFor:} (shown in figure \ref{fig_view_chars_bytes}).
\item[\texttt{gtSourceCharsFor:}] \hfill \\
	shows a list of \ct{Character}s corresponding to each of the Processing source code's characters (shown on the left in figure \ref{fig_view_chars_bytes}). \ct{gtSourceCharsPlusSourceFor:} combines this view with \ct{gtSourceCodeFor:}.
\item[\texttt{gtSourceCodeFor:}] \hfill \\
	displays a fresh read-only editor instance from \ct{SmaCCParseNode>>gtSourceEditorWithHightlight:} with a custom \ct{BrTextEditorReadonlyWithNavigationMode} mode (shown on the top left in figure \ref{fig_view_abstractions}, on the left in \ref{fig_view_transpilation}, \etc).
\item[\texttt{gtStepsFor:}] \hfill \\
	shows a list of \ct{ProcessingRunStep}s and their own \ct{gtAbstractionFor:} view, consisting of their \ct{gtSourceCodeFor:}, \ct{gtBytecodeFor:}, \ct{gtVariablesFor:}, \ct{gtStackFor:} and \ct{gtOutputFor:} (shown in figure \ref{fig_view_runsteps}). \ct{ProcessingRunStep>>gtOverviewFor:} is a simplified variant of this shown from the ``Processing/Python'' snippet.
\item[\texttt{gtTokensFor:}] \hfill \\
	shows a list of \ct{SmaCCToken}s that were produced by \ct{ProcessingParser} (shown on the left in figure \ref{fig_view_tokens_ast}). \ct{gtTokensPlusSourceFor:} combines this view with \ct{gtSourceCodeFor:}.
\item[\texttt{gtTokensPlusTreeFor:}] \hfill \\
	combines \ct{gtTokensFor:} with \ct{gtTreeFor:} (shown in figure \ref{fig_view_tokens_ast}).
\item[\texttt{gtTranspilationFor:}] \hfill \\
	shows the transpiled Smalltalk code in \ct{GT}'s code viewer which separates methods and adds syntax highlighting. \ct{gtTranspilationPlusSourceFor:} combines this view with \ct{gtSourceCodeFor:} (shown in figure \ref{fig_view_transpilation}).
\item[\texttt{gtTranspilationPostfixFor:} and \texttt{gtTranspilationPrefixFor:}] \hfill \\
	show a \ct{String} produced by \ct{ProcessingTranspilerVariant} in either its \ct{prefix} or \ct{postfix} modes (shown at the bottom in figure \ref{fig_view_prefix_postfix} respectively).
\item[\texttt{gtTreeFor:}] \hfill \\
	shows a treelist of \ct{PyRootNode}s for expression roots and \ct{SmaCCToken}s for structural tokens (shown on the right in figure \ref{fig_view_tokens_ast}).
\item[\texttt{gtTreeMondrianFor:}] \hfill \\
	shows a horizontal \ct{GtMondrian} tree produced by \ct{ProcessingTreeMondrianCreator} (shown in figure \ref{fig_view_ast_tree}). \ct{gtTreePlusSourceFor:} combines this view with \ct{gtSourceCodeFor:}.
\end{description}

\begin{cfigure}[fig_view_abstractions]{The `Abstractions' view with source code, \ac{AST}, bytecode and output showing}
\includegraphics[width=.7\textwidth]{view_abstractions}
\end{cfigure}

\begin{cfigure}[fig_view_chars_bytes]{The `Characters' and `Bytes` views, connected}
\includegraphics[width=.7\textwidth]{view_chars_bytes}
\end{cfigure}

\begin{cfigure}[fig_view_tokens_ast]{The `Tokens' and `\ac{AST}` views, connected}
\includegraphics[width=.7\textwidth]{view_tokens_ast}
\end{cfigure}

\begin{cfigure}[fig_view_ast_tree]{The \ac{AST} as a pannable and zoomable tree}
\includegraphics[width=.7\textwidth]{view_ast_tree}
\end{cfigure}

\begin{cfigure}[fig_view_transpilation]{The `Transpilation' view, showing Processing and Smalltalk code side-by-side}
\includegraphics[width=.7\textwidth]{view_transpilation}
\end{cfigure}

\begin{cfigure}[fig_view_prefix_postfix]{Source code, \ac{AST} and a transpilation to two pseudo-languages (with pure prefix and postfix notation)}
\includegraphics[width=.7\textwidth]{view_prefix_postfix}
\end{cfigure}

\begin{cfigure}[fig_view_ir_bytecode]{The `\ac{IR}' and 'Bytecode' views, connected}
\includegraphics[width=.7\textwidth]{view_ir_bytecode}
\end{cfigure}

\begin{cfigure}[fig_view_runsteps]{The `Runsteps' view, allowing to step through execution and inspect variables and stack values}
\includegraphics[width=.7\textwidth]{view_runsteps}
\end{cfigure}

\begin{cfigure}[fig_view_slices]{The `Slices' view shows the list of objects connecting Processing and Smalltalk code}
\includegraphics[width=.7\textwidth]{view_slices}
\end{cfigure}

\begin{cfigure}[fig_view_shapes]{The `Shapes' displays all output shapes individually}
\includegraphics[width=.7\textwidth]{view_shapes}
\end{cfigure}

\begin{cfigure}[fig_view_raw]{The `Raw' view is provided by \ac{GT} and shows all variables of an instantiated object}
\includegraphics[width=.7\textwidth]{view_raw}
\end{cfigure}

\begin{cfigure}[fig_view_meta]{The `Meta' view is provided by \ac{GT} and shows all methods defined for the instantiated object}
\includegraphics[width=.7\textwidth]{view_meta}
\end{cfigure}



\chapter{Questionnaires}

The questionnaires were implemented in \href{Microsoft Forms}{https://forms.office.com/} in the student's native language.


\section{Questionnaire for \ref{sc_validation_ca}} \label{app_questionnaire_1}


\subsection*{Feedback zur heutigen Unterrichtssequenz}

\begin{Questionnaire}

\item \Question{Wie hat Ihnen die heutige Unterrichtssequenz gefallen?} \\ gar nicht \Qrating{5} sehr gut

\item \Question{Welche Themen haben Sie heute alle bearbeiten können?}
\begin{Qlist}
\item Arbeiten mit Glamorous Toolkit
\item Maschinensprache und Prozessor
\item Funktionen eines Compilers
\item Anhang
\end{Qlist}

\item \Question{Wie sehr trauen Sie sich zu, die heutigen Inhalte jemand anderem zu erklären?} \\ gar nicht \Qrating{5} \emph{easy-peasy}

\item \Question{Wie viele der Python-Progrämmchen haben Sie selbst verändert?}
\begin{Qlist}[$\ocircle$]
\item Keines
\item Eines
\item Zwei bis drei
\item Vier oder mehr
\end{Qlist}

\item \Question{Was ist ein Stack?} \Qlines{1}

\item \Question{Was machen Lexer und Parser?} \Qlines{1}

\item \Question{Wie gut hat die Lernumgebung für Sie funktioniert?} \\ gar nicht \Qrating{5} problemlos

\item \Question{Was hat Ihnen an der Lernumgebung gefallen?} \Qlines{2}

\item \Question{Welche Änderungen an der Lernumgebung wünschen Sie sich für die nächste Klasse?} \Qlines{2}

\item \Question{Wie hilfreich fanden Sie die Nebeneinanderstellungen der unterschiedlichen Schritte beim Ausführen/Übersetzen eines Programms?} \\ weglassen \Qrating{5} bitte mehr davon

\item \Question{Beschreiben Sie in eigenen Worten: Wie wird ein Programm auf einem Prozessor ausgeführt?} \Qlines{2}

\item \Question{Beschreiben Sie in eigenen Worten: Wie wird ein Programm in einer Hochsprache wie Processing für den Prozessor aufbereitet?} \Qlines{2}

\item \Question{Was hatte das heutige Thema mit Silizium, Transistoren, Gattern und Schaltungen zu tun?} \Qlines{2}

\suspend{Questionnaire}


\subsection*{Feedback zum Informatikunterricht der letzten zwei Jahre}

\resume{Questionnaire}

\item \Question{Was war für Sie das Highlight vom Informatik-Unterricht? (Was hat Ihnen am meisten Eindruck gemacht?)} \Qlines{1}

\item \Question{Was ist Ihnen vom Informatik-Unterricht alles geblieben (einige Stichworte zum Stoff)?} \Qlines{2}

\item \Question{Was hat Ihnen am Informatik-Unterricht gefallen?} \Qlines{2}

\item \Question{Wenn Sie mir vor zwei Jahren einen Hinweis geben könnten: Was hätten Sie sich für den Unterricht anders gewünscht?} \Qlines{2}

\end{Questionnaire}



\section{Questionnaire for \ref{sc_validation_compiler}} \label{app_questionnaire_2}


\subsection*{Feedback zur heutigen Unterrichtssequenz}

\begin{Questionnaire}

\item \Question{Wie hat Ihnen die heutige Unterrichtssequenz gefallen?} \\ gar nicht \Qrating{5} sehr gut

\item \Question{Welche Themen haben Sie heute alle bearbeiten können?}
\begin{Qlist}
\item Arbeiten mit Glamorous Toolkit
\item Human Resource Machine (aus Maschinensprache und Prozessor)
\item Lexer und Parser
\item Transpiler und Compiler
\item Optimierer
\end{Qlist}

\item \Question{Wie sehr trauen Sie sich zu, die heutigen Inhalte jemand anderem zu erklären?} \\ gar nicht \Qrating{5} \emph{easy-peasy}

\item \Question{Wie viele der Python-Progrämmchen haben Sie selbst verändert?}
\begin{Qlist}[$\ocircle$]
\item Keines
\item Eines
\item Zwei bis drei
\item Vier oder mehr
\end{Qlist}

\item \Question{Weshalb kann ein Prozessor ein Processing-Programm nicht ohne Übersetzung ausführen} \Qlines{1}

\item \Question{Was machen Lexer und Parser?} \Qlines{1}

\item \Question{Wie gut hat die Lernumgebung für Sie funktioniert?} \\ gar nicht \Qrating{5} problemlos

\item \Question{Was hat Ihnen an der Lernumgebung gefallen?} \Qlines{2}

\item \Question{Welche Änderungen an der Lernumgebung wünschen Sie sich für die nächste Klasse?} \Qlines{2}

\item \Question{Wie hilfreich fanden Sie die Nebeneinanderstellungen der unterschiedlichen Schritte beim Ausführen/Übersetzen eines Programms?} \\ weglassen \Qrating{5} bitte mehr davon

\item \Question{Beschreiben Sie in eigenen Worten: Wie wird ein Programm in einer Hochsprache wie Processing für den Prozessor aufbereitet?} \Qlines{2}

\item \Question{Was hatte das heutige Thema mit Codierung und was mit Programmieren zu tun?} \Qlines{2}

\suspend{Questionnaire}


\subsection*{Feedback zum Informatikunterricht}

\resume{Questionnaire}

\item \Question{Was war für Sie das Highlight vom Informatik-Unterricht? (Was hat Ihnen am meisten Eindruck gemacht?)} \Qlines{1}

\item \Question{Was ist Ihnen vom Informatik-Unterricht alles geblieben (einige Stichworte zum Stoff)?} \Qlines{2}

\item \Question{Was hat Ihnen am Informatik-Unterricht gefallen?} \Qlines{2}

\item \Question{Welche Änderungen wünschen Sie sich fürs kommende Schuljahr in Informatik?} \Qlines{2}

\end{Questionnaire}
